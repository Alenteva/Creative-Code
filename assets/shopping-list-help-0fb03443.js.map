{"version":3,"file":"shopping-list-help-0fb03443.js","sources":["../../src/js/header.js","../../src/js/shopping-list-help.js"],"sourcesContent":["const switcher = document.querySelector('.header-switch');\nconst bodyWallpaper = document.querySelector('body');\nconst header = document.querySelector('.header');\nconst svgElement1 = document.querySelector('.header-logo-svg');\nconst svgElement2 = document.querySelector('.shop-list-svg-basket');\nconst links = document.querySelector('.header-nav');\nconst home = document.querySelector('.home');\nconst menu = document.querySelector('.header-menu');\nconst shopList = document.querySelector('.shop-list');\n\nconst isDarkTheme = localStorage.getItem('darkTheme');\n\nif (isDarkTheme === 'true') {\n  document.body.classList.add('dark-theme');\n  darckWallpaper();\n} else {\n  whiteWallpaper();\n}\n\nswitcher.addEventListener('click', () => {\n  if (switcher.checked) {\n    document.body.classList.add('dark-theme');\n    localStorage.setItem('darkTheme', 'true');\n    darckWallpaper();\n  } else {\n    document.body.classList.remove('dark-theme');\n    localStorage.setItem('darkTheme', 'false');\n    whiteWallpaper();\n  }\n});\n\nfunction darckWallpaper() {\n  bodyWallpaper.style.backgroundColor = '#202024';\n  bodyWallpaper.style.color = '#ffffff';\n  header.style.backgroundColor = '#111111';\n  header.style.borderColor = '#ffffff';\n  menu.innerHTML =\n    '<svg width=\"28\" height=\"28\"><use href=\"../images/icons/symbol-defs.svg#icon-menu2\"></use></svg>';\n  svgElement1.innerHTML =\n    '<svg class=\"header-logo-svg\" width=\"109\" height=\"28\"><use href=\"../images/icons/symbol-defs.svg#icon-logo2\"></use></svg>';\n  if (shopList.classList.contains('active-shop')) {\n    svgElement2.innerHTML =\n      '<svg class=\"shop-list-svg-basket\" width=\"14\" height=\"18\"><use href=\"../images/icons/symbol-defs.svg#icon-icon-basket\"></use></svg>';\n  } else {\n    svgElement2.innerHTML =\n      '<svg class=\"shop-list-svg-basket\" width=\"14\" height=\"18\"><use href=\"../images/icons/symbol-defs.svg#icon-icon-basket2\"></use></svg>';\n  }\n}\n\nfunction whiteWallpaper() {\n  bodyWallpaper.style.backgroundColor = '#F6F6F6';\n  bodyWallpaper.style.color = '#111111';\n  header.style.backgroundColor = '#ffffff';\n  header.style.borderColor = '#111111';\n  menu.innerHTML =\n    '<svg width=\"28\" height=\"28\"><use href=\"../images/icons/symbol-defs.svg#icon-menu\"></use></svg>';\n  svgElement1.innerHTML =\n    '<svg class=\"header-logo-svg\" width=\"109\" height=\"28\"><use href=\"../images/icons/symbol-defs.svg#icon-logo\"></use></svg>';\n  svgElement2.innerHTML =\n    '<svg class=\"shop-list-svg-basket\" width=\"14\" height=\"18\"><use href=\"../images/icons/symbol-defs.svg#icon-icon-basket\"></use></svg>';\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const homeLink = document.querySelector('.home');\n  const shopLink = document.querySelector('.shop-list');\n  homeLink.addEventListener('click', function () {\n    homeLink.classList.add('active-home');\n    shopLink.classList.remove('active-home');\n    localStorage.setItem('activeButton', 'home');\n  });\n  shopLink.addEventListener('click', function () {\n    shopLink.classList.add('active-shop');\n    homeLink.classList.remove('active-shop');\n    localStorage.setItem('activeButton', 'shop');\n  });\n  const activeButton = localStorage.getItem('activeButton'); // Перевірка localStorage при завантаженні сторінки\n  if (activeButton === 'home') {\n    homeLink.classList.add('active-home');\n  } else if (activeButton === 'shop') {\n    shopLink.classList.add('active-shop');\n  }\n});\n","document.addEventListener('DOMContentLoaded', function () {\n  const bookListContainer = document.querySelector('.shoppinglist-container');\n  const btnDeleteBook = document.getElementById('deleteBtn');\n\n  // Викликаємо функцію для отримання книг з localStorage\n  const books = loadFromLS();\n\n  //==================== логіка відкриття вікна з книжками або без та видалення книжок по click\n  if (books.length === 0) {\n    bookListContainer.innerHTML = emptyMessage;\n  } else {\n    renderBooks(books);\n\n    btnDeleteBook.addEventListener('click', function (event) {\n      if (event.target.closest('.shoplist-btn-delete')) {\n        const bookId = event.target.dataset.bookId;\n        let updatedBooks = books.filter(book => book._id !== bookId);\n\n        localStorage.setItem('books', JSON.stringify(updatedBooks));\n\n        renderBooks(updatedBooks);\n\n        const liToDelete = document.querySelector(\n          `li[data-book-id=\"${bookId}\"]`\n        );\n        if (liToDelete) {\n          liToDelete.remove();\n        }\n      }\n    });\n  }\n});\n\nfunction renderBooks(books) {\n  const limitedBooks = books.slice(0, 3);\n\n  const bookItemsHTML = limitedBooks\n    .map(book => {\n      return `<li>${templateBook(book)}</li>`;\n    })\n    .join('');\n\n  const bookListContainer = document.querySelector('.shoppinglist-container');\n  bookListContainer.innerHTML = `<ul>${bookItemsHTML}</ul>`;\n}\n\nfunction loadFromLS() {\n  const booksJSON = localStorage.getItem('idBooks') || '[]';\n  return JSON.parse(booksJSON);\n}\n\nfunction changeTheme(theme) {\n  const body = document.body;\n\n  if (theme === 'dark') {\n    body.classList.add('dark-theme');\n    localStorage.setItem('theme', 'dark');\n  } else {\n    body.classList.remove('dark-theme');\n    localStorage.setItem('theme', 'light');\n  }\n}\n\nfunction themeFromLs() {\n  const savedTheme = localStorage.getItem('theme');\n  if (savedTheme) {\n    changeTheme(savedTheme);\n  }\n}\n\nthemeFromLs();\n\nfunction templateBook(book) {\n  const {\n    _id,\n    book_image,\n    title,\n    list_name,\n    description,\n    author,\n    amazon_product_url,\n    buy_links,\n  } = book;\n  return `\n   <div class=\"shoplist-error container is-active\">\n      <div class=\"support-ukraine\">\n      <div class=\"container-block\" id=\"${_id}\">    \n        <img src=\"${book_image}\" alt=\"${title}\" class=\"shoplist-bookcover\">\n        <div class=\"shoplist\">\n          <h2 class=\"shoplist-title-book\">${title}</h2>\n          <p class=\"shoplist-category-book\">${list_name}</p>\n          <p class=\"shoplist-description\">${description}</p>\n          <p class=\"shoplist-author\">${author}</p>\n        </div>\n        <button id=\"deleteBtn\" type=\"button\" class=\"shoplist-btn-delete\" data-book-id=\"${_id}\">\n          <svg class=\"shoplist-btn-icon\" width=\"16\" height=\"16\">\n            <use href=\"./images/icons/symbol-defs.svg#icon-cart\"></use>\n          </svg>\n        </button>\n        <ul class=\"links\">\n          <li><img src=\"${amazon_product_url}\" class=\"amazon\"></li>\n          <li><img src=\"${buy_links}\" class=\"apple-book\"></li>\n        </ul>\n      </div>\n    `;\n}\n\n//=============== функція рендеру розмітки вікна, якщо немає книжок в LS ========\nconst img = 'books-tab-2x.png'; // назва файлу зображення\nconst imgPath = 'images/shopping-list/' + img;\n\nconst emptyMessage = `\n    <div class=\"shoplist-error container is-active\">\n      <div class=\"support-ukraine\">\n        <a href=\"./partials/support-ukraine.html\"></a>\n      </div>\n      <div class=\"shoplist-error\">\n        <h1 class=\"shoplist-title error\">\n          Shopping\n          <span class=\"shoplist-title-span\">List</span>\n        </h1>\n        <div class=\"shoplist-error-content\">\n          <p class=\"shoplist-error-text\">This page is empty, add some books and proceed to order.</p>\n          <img src=\"${imgPath}\" alt=\"books\" class=\"shoplist-error-books\">\n        </div>\n      </div>\n    </div>\n  `;\n\n//=======================================================================================\n\n// if (books.length === 0) {\n//   bookListContainer.innerHTML = emptyMessage;\n// } else {\n//   renderBooks(books);\n// }\n// const settings = {\n//   theme: 'dark',\n//   isAuthenticated: true,\n//   options: [1, 2, 3],\n// };\n// localStorage.setItem('settings', JSON.stringify(settings));\n\n// const savedSettings = localStorage.getItem('settings');\n// console.log(savedSettings); // A string\n\n// const parsedSettings = JSON.parse(savedSettings);\n// console.log(parsedSettings); // Settings object\n\n//===============проверить===============================\n//   function loadFromLS() {\n//     const booksJSON = localStorage.getItem('bookId'); //вместо books д.б. актуальній ключ\n//     const parsedBooks = JSON.parse(booksJSON);\n\n//     if (booksJSON) {\n//       return JSON.parse(booksJSON);\n//     } else {\n//       return [];\n//     }\n//   }\n\n//   const shoplistTitle = document.querySelector('.shoplist-title');\n\n//   function renderBooks(books) {\n//     const markup = templateBooks(books);\n//     bookListContainer.insertAdjacentHTML('beforeend', markup);\n\n//     lightbox.refresh();\n//   }\n// });\n\n//===============================================================================================================\n\n// function templateBooks(books) {\n//   return books.map(templateBook).join('');\n// }\n\n// //==========виклик вікна, якщо не має книжок в LS ===================\n// shoppingListContainer.innerHTML = emptyMessage;\n// const shoppingListContainer = document.querySelector('.shoplist');\n// //=================видалення картки\n// shoppingListContainer.addEventListener('click', function (event) {\n//   const target = event.target;\n//   if (\n//     event.target.parentNode.nodeName === 'BUTTON' ||\n//     event.target.nodeName === 'BUTTON'\n//   ) {\n//     const bookContainer = target.closest('.container-block');\n//     const bookId = bookContainer.getAttribute('#id');\n//     let newArr = [];\n//     const dataArr = infoItemLocalStorage(TASKS_KEY);\n//     for (const item of dataArr) {\n//       if (item.constID !== bookId) {\n//         newArr.push(item);\n//       }\n//     }\n//     addItemLocalStorage(TASKS_KEY, newArr);\n\n//     bookContainer.remove();\n\n//     if (!shoppingListContainer.querySelector('.container-block')) {\n//       shoppingListContainer.innerHTML = emptyMessage;\n//     }\n\n//     // Оновлення пагінації після видалення книги\n//     // updatePagination();\n//   }\n// });\n\n// addToShoppingList();\n// //==================================================================================================================\n// //===========фукнція видалення книги============================\n// export function handleDeleteBookBtn(e) {\n//   const goalDeleteBtn = e.target.closest(`.shopping-list__icon-deleteBtn`);\n\n//   if (goalDeleteBtn !== e.target) {\n//     return;\n//   } else {\n//     const idBookToDelete = e.target.attributes.id.nodeValue;\n//     const storedBooks = JSON.parse(localStorage.getItem('idBooks'));\n//     storedBooks.splice(storedBooks.indexOf(idBookToDelete), 1);\n//     localStorage.setItem('idBooks', JSON.stringify(storedBooks));\n//     updateShoppingList();\n//     renderCardOfBooks();\n//   }\n// }\n\n// // document.body.classlist.add('dark');\n\n// import {\n//   bgImagesUrlx1,\n//   bgImagesUrlx2,\n//   bgImagesUrlx3,\n//   logoAmazonImagesUrlx1,\n//   logoAmazonImagesUrlx2,\n//   logoAmazonImagesUrlx3,\n//   allpeBookImagesUrlx1,\n//   allpeBookImagesUrlx2,\n//   allpeBookImagesUrlx3,\n//   bookShopImagesUrlx1,\n//   bookShopImagesUrlx2,\n//   bookShopImagesUrlx3,\n//   dumpImagesUrl,\n// } from './imgAdress';\n// export { renderShoppingList, renderClearShoppingList };\n\n// function renderShoppingList(book) {\n//   return book\n//     .map(\n//       ({\n//         _id,\n//         book_image,\n//         author,\n//         list_name,\n//         title,\n//         description,\n//         buy_links,\n//       }) => {\n//         return `<li id=\"${_id}\" class=\"shopping-list__card-boock\">\n//                 <div class=\"shopping-list__general-information\">\n//                     <div>\n//                         <img class=\"shopping-list__img\" src=\"${book_image}\" alt=\"book image\">\n//                         <p class=\"shopping-list__author\">${author}</p>\n//                     </div>\n//                         <div\">\n//                             <h2 class=\"shopping-list__title-book\">${title}</h2>\n//                             <h3 class=\"shopping-list__list-name\">${list_name}</h3>\n//                             <p class=\"shopping-list__description--near\">${description}</p>\n//                             <p class=\"shopping-list__author--near\">${author}</p>\n//                             <ul class=\"shopping-list__shop-list\">\n//                                 <li class=\"shopping-list__shop-list-item\">\n//                                     <a aria-label=\"Link to shop\" rel=\"noreferrer noopener nofollow\" class=\"shopping-list__shop-list-link\" href=\"${buy_links[0].url}\" target=\"_blank\">\n//                                         <img class=\"shopping-list__shop-lis--img logoAmazon\" srcset=\"${logoAmazonImagesUrlx2} 2x, ${logoAmazonImagesUrlx3} 3x\" src=\"${logoAmazonImagesUrlx1}\" alt=\"logoAmazon\">\n//                                     </a>\n//                                 </li>\n//                                 <li class=\"shopping-list__shop-list-item\">\n//                                     <a aria-label=\"Link to shop\" rel=\"noreferrer noopener nofollow\" class=\"shopping-list__shop-list-link\" href=\"${buy_links[1].url} \" target=\"_blank\">\n//                                         <img class=\"shopping-list__shop-lis--img logoBook\" srcset=\"${allpeBookImagesUrlx2} 2x, ${allpeBookImagesUrlx3} 3x\" src=\"${allpeBookImagesUrlx1}\" alt=\"logoBook\">\n//                                     </a>\n//                                 </li>\n//                                 <li class=\"shopping-list__shop-list-item\">\n//                                     <a aria-label=\"Link to shop\" rel=\"noreferrer noopener nofollow\" class=\"shopping-list__shop-list-link\" href=\"${buy_links[4].url} \" target=\"_blank\">\n//                                         <img class=\"shopping-list__shop-lis--img bookShop\" srcset=\"${bookShopImagesUrlx2} 2x, ${bookShopImagesUrlx3} 3x\" src=\"${bookShopImagesUrlx1}\" alt=\"bookShop\">\n//                                     </a>\n//                                 </li>\n//                             </ul>\n//                             <img id=\"${_id}\" width=\"38\" height=\"38\" class=\"shopping-list__icon-deleteBtn\" src=\"${dumpImagesUrl}\" alt=\"icon-deleteBtn\">\n//                         </div>\n//                         <p class=\"shopping-list__description\">${description}</p>\n//                     </div>\n//                     </li>`;\n//       }\n//     )\n//     .join('');\n// }\n\n// function renderClearShoppingList() {\n//   return `<div class=\"shopping-list__clear\">\n//                 <p class=\"shopping-list__clear--description\" >This page is empty, add some books and proceed to order.</p>\n//                 <img class=\"shopping-list__clear-bg\"  srcset=\"${bgImagesUrlx2} 2x, ${bgImagesUrlx3} 3x\" src=\"${bgImagesUrlx1}\" alt=\"books\">\n//             </div>`;\n// }\n"],"names":["switcher","bodyWallpaper","header","svgElement1","svgElement2","menu","shopList","isDarkTheme","darckWallpaper","whiteWallpaper","homeLink","shopLink","activeButton","bookListContainer","btnDeleteBook","books","loadFromLS","emptyMessage","renderBooks","event","bookId","updatedBooks","book","liToDelete","bookItemsHTML","templateBook","booksJSON","changeTheme","theme","body","themeFromLs","savedTheme","_id","book_image","title","list_name","description","author","amazon_product_url","buy_links","img","imgPath"],"mappings":"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"}