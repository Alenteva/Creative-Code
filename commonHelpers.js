import"./assets/support-ukraine-ea668b8c.js";import{i as P,g as z,s as U,a as B,b as j,c as r,d as R,e as J,f as d,S as Y}from"./assets/vendor-41089998.js";const F={apiKey:"AIzaSyD8UvisVnkCvMijmf6q4ZtLkQgC43vz2KM",authDomain:"dookshelf-357a4.firebaseapp.com",projectId:"dookshelf-357a4",storageBucket:"dookshelf-357a4.appspot.com",messagingSenderId:"957443484270",appId:"1:957443484270:web:de06245395594e6cf9947f",measurementId:"G-PGZE6HZC47"};P(F);const c=z(),g=document.querySelector(".Form-window"),Q=document.querySelector(".Close-form-btn"),f=document.querySelectorAll(".sign-up"),S=document.querySelector(".burger-menu-user"),E=document.getElementById("email"),M=document.getElementById("password"),_=document.getElementById("username"),Z=document.querySelector(".quickstart-sign-in"),G=document.querySelector(".quickstart-sign-up"),h=document.querySelector(".header-nav"),k=document.querySelector(".burger-menu-list"),K=document.querySelector(".reset-btn"),V=document.querySelector(".log-out-btn"),C=document.querySelector(".Log-out-btn");f.forEach(e=>{e.addEventListener("click",function(){g.classList.add("is-open")})});Q.addEventListener("click",function(){g.classList.remove("is-open")});function X(){if(c.currentUser)B(c).then(()=>{x(),w()});else{const e=E.value,o=M.value,t=_.value;if(e.length<4){alert("Please enter an email address");return}if(o.length<4){alert("Please enter a password with at least 4 characters");return}j(c,e,o).then(a=>{const s=a.user;s.displayName=t,g.classList.remove("is-open"),h.style.display="flex",k.style.display="block",f.textContent=s.displayName,S.textContent=s.displayName,r.show({title:"Hello",message:`Welcome, ${s.displayName}!`,color:"blue",position:"topCenter"}),localStorage.setItem("user-data",JSON.stringify({name:s.displayName,mail:s.email})),s.getIdToken().then(n=>{localStorage.setItem("userToken",n)})}).catch(a=>{const s=a.code,n=a.message;alert(s==="auth/wrong-password"?"Wrong password":n),console.error(a)})}}function ee(){const e=E.value,o=M.value,t=_.value;if(e.length<4){alert("Please enter an email address.");return}if(o.length<4){alert("Please enter a password.");return}R(c,e,o).then(a=>{const s=a.user;s.displayName=t,g.classList.remove("is-open"),h.style.display="flex",k.style.display="block",f.textContent=s.displayName,S.textContent=s.displayName,r.show({title:"Ok",message:"You have successfully registered!",color:"blue",position:"topCenter"}),localStorage.setItem("user-data",JSON.stringify({name:s.displayName,mail:s.email})),s.getIdToken().then(n=>{localStorage.setItem("userToken",n)})}).catch(function(a){const s=a.code,n=a.message;s=="auth/weak-password"?alert("The password is too weak."):alert(n),console.log(a)})}window.onload=function(){const e=localStorage.getItem("userToken");e?U(c,e).then(o=>{const t=o.user,a=JSON.parse(localStorage.getItem("user-data"));a&&(t.displayName=a.name,t.email=a.mail,g.classList.remove("is-open"),h.style.display="flex",k.style.display="block",f.textContent=t.displayName,S.textContent=t.displayName,w(t))}).catch(o=>{console.error(o)}):w()};function w(e){e?(g.classList.remove("is-open"),h.style.display="flex",k.style.display="block",C.style.display="inline-block",f.textContent=e.displayName,S.textContent=e.displayName):(h.style.display="none",k.style.display="none",g.classList.remove("is-open"),C.style.display="none")}function te(){const e=E.value;J(c,e).then(function(){r.show({message:"Password reset email sent. Check your email",color:"yellow",position:"topCenter"})}).catch(function(o){const t=o.code,a=o.message;(t=="auth/invalid-email"||t=="auth/user-not-found")&&alert(a),console.log(o)})}function x(){c.currentUser&&B(c).then(()=>{localStorage.removeItem("user-data"),localStorage.removeItem("userToken"),w()})}G.addEventListener("click",function(e){e.preventDefault(),ee()});Z.addEventListener("click",function(e){e.preventDefault(),X()});K.addEventListener("click",function(e){e.preventDefault(),te()});V.addEventListener("click",function(e){e.preventDefault(),x()});C.addEventListener("click",function(e){e.preventDefault(),x()});const $="/Forest-Code/assets/icon-4664cafe.svg";function oe(){const e=document.getElementById("burgerToggle"),o=document.getElementById("burgerMenu");e.addEventListener("click",function(){o.classList.toggle("burger-menu-show"),o.classList.contains("burger-menu-show")?e.innerHTML=`
      <svg width="18" height="18" stroke="#000">
        <use href="${$}#icon-close"></use>
      </svg>`:e.innerHTML=`
      <svg width="28" height="28">
        <use href="${$}#icon-menu"></use>
      </svg>`})}document.addEventListener("DOMContentLoaded",function(){oe()});const se=document.getElementById("home");document.getElementById("shopping-list");se.classList.add("active");const m=document.querySelector(".list-one"),v=document.querySelector(".list_categories"),i=document.querySelector(".main-title"),b=document.querySelector(".container-loader");let y;function ae(){let e=window.innerWidth;return e<=767?0:e<=1439?2:4}function q(){const e=i.textContent.split(" "),o=e[e.length-1];i.innerHTML=i.innerHTML.replace(o,`<span class="blue">${o}</span>`)}async function N(){new Y(".link-img")}async function A(e){let o="";const t=ae();for(let a in e){o+=`
            <li class="books_list">
                <h2 class="name_category">${e[a].list_name}</h2>
                <ul class="images_books">`;for(let s in e[a].books)if(o+=`<li class="image_book" data-category="${e[a].books[s]._id}">
                                    <div class="div-animation">
                                            <a class="link-img" href="${e[a].books[s].book_image}"><img class="img-example" alt="Book title" src="${e[a].books[s].book_image}"></img></a>
                                        <div class="box-quick-view"><p class="animation-paragraf">Quick view</p></div>
                                    </div>
                                
                                <div class="box-cards">
                                    <p class="title-book">${e[a].books[s].title}</p>
                                    <p class="author-book">${e[a].books[s].author}</p>
                                </div>
                            </li>`,t==s)break;o+=`</ul><button class="button-see-more" data-category="${e[a].list_name}">See more</button></li>`}m.insertAdjacentHTML("beforeend",o),N(),b.style.display="none"}m.addEventListener("click",async e=>{if(e.target.classList.contains("button-see-more")){b.style.display="block",m.innerHTML="";const o=e.target.dataset.category;i.textContent=o,v.querySelector(".categoria")&&v.querySelectorAll(".categoria").forEach(n=>{i.textContent===n.textContent&&(document.querySelector(".selected-categories").classList.remove("selected-categories"),n.classList.add("selected-categories"))});const t=i.textContent.split(" "),a=t[t.length-1];i.innerHTML=i.innerHTML.replace(a,`<span class="blue">${a}</span>`),await d.get(`https://books-backend.p.goit.global/books/category?category=${o}`).then(s=>{if(s.data.length===0)throw new Error("Sorry, books in the selected category were not found");I(s.data)}).catch(s=>r.error({title:"Error",message:s.message}))}});async function ne(){m.innerHTML="",b.style.display="block",i.textContent==="Best Sellers Books"?await d.get("https://books-backend.p.goit.global/books/top-books").then(e=>{if(e.data.length===0)throw new Error("Sorry, books in the selected category were not found");A(e.data)}).catch(e=>r.error({title:"Error",message:e.message})):await d.get(`https://books-backend.p.goit.global/books/category?category=${y}`).then(e=>{if(e.data.length===0)throw new Error("Sorry, books in the selected category were not found");I(e.data)}).catch(e=>r.error({title:"Error",message:e.message}))}ne();async function ie(e){let o="";const t='<li tabindex="0" data-name="Best Sellers Books" class="categoria selected-categories">All categories</li>';e.forEach(s=>{o+=`<li tabindex="0" data-name="${s.list_name}" class="categoria">${s.list_name}</li>`}),v.insertAdjacentHTML("beforeend",o),v.insertAdjacentHTML("afterbegin",t),document.querySelectorAll(".categoria").forEach(s=>{s.addEventListener("click",async n=>{b.style.display="block",m.innerHTML="",n.preventDefault(),document.querySelector(".selected-categories").classList.remove("selected-categories"),n.target.classList.add("selected-categories"),y=n.target.textContent,y=y.replace(/ /g,"%20"),n.target.textContent!=="All categories"?(i.textContent=n.target.textContent,q(),await d.get(`https://books-backend.p.goit.global/books/category?category=${y}`).then(l=>{if(l.data.length===0)throw new Error("Sorry, books in the selected category were not found");I(l.data)}).catch(l=>r.error({title:"Error",message:l.message}))):(i.textContent="Best Sellers Books",q(),await d.get("https://books-backend.p.goit.global/books/top-books").then(l=>{if(l.data.length===0)throw new Error("Sorry, books in the selected category were not found");A(l.data)}).catch(l=>r.error({title:"Error",message:l.message})))})})}d.get("https://books-backend.p.goit.global/books/category-list").then(e=>{ie(e.data)}).catch(e=>r.error({title:"Error",message:e.message}));async function I(e){console.log("ok");let o="";e.forEach(async t=>{o+=`<li class="book" data-category="${t._id}">
                        <div class="div-animation">
                        <a class="link-img" href="${t.book_image}"><img class="img-example" alt="Book title" src="${t.book_image}"></img></a>
                            <div class="box-quick-view"><p class="animation-paragraf">Quick view</p></div>
                        </div>
                                <div class="box-cards">
                                    <p class="title-book">${t.title}</p>
                                    <p class="author-book">${t.author}</p>
                                </div>
                      </li>`}),m.insertAdjacentHTML("beforeend",o),N(),b.style.display="none"}const re=document.querySelector(".list-one");let u=D();O();let p,H;const W=document.querySelector(".modal-window-shop");re.addEventListener("click",async e=>{if(e.target.classList.contains("box-quick-view")){const o=e.target.parentNode.parentNode.dataset.category;T(o),console.log("ok box")}else if(e.target.classList.contains("animation-paragraf")){const o=e.target.parentNode.parentNode.parentNode.dataset.category;T(o),console.log("ok paragraf")}});async function T(e){de(),p&&document.body.classList.add("modal-open"),console.log("ok renderBook");const t=(await d.get(`https://books-backend.p.goit.global/books/${e}`)).data;H={title:t.title,book_image:t.book_image,author:t.author,description:t.description,id:t._id,category:t.list_name,link_amazon:t.buy_links[0].url,link_goto:t.buy_links[1].url};let a=`
      <span>
          <svg class="close-window" width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path class="close-window" d="M21 7L7 21M7 7L21 21" stroke="#111111" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
      </span>
      <div class="main-modal-window-content">
          <div class="modal-image-container"><img class="modal-image" src="${t.book_image}" alt="${t.title}"></div>
          <div class="modal-main-content-text">
              <h2 class="">${t.title}</h2>
              <p class="book-author">${t.author}</p>
              <p class="modal-book-description">${t.description}</p>
              <div class="links-books">
                  <a class="" href="${t.buy_links[0].url}" rel="amazon ${t.title}" target="_blank""><img src="./images/myPhotos/amazon.png" alt="amazon" class="filter-img"></a>
                  <a class="" href="${t.buy_links[1].url}" rel="apple-book" target="_blank""><img src="./images/myPhotos/book.png" alt="amazon" class="filter-img"></a>
              </div>
          </div>
      </div>
      `;u.has(t.title)?a+=`<button class="card-books-category-button margin-add" type="button" data-id="${t._id}" data-title="${t.title}">Remove from the shopping list</button>
            <p id="congratulations">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>`:a+=`<button class="card-books-category-button margin-add" type="button" data-id="${t._id}" data-title="${t.title}">Add to shopping list</button>
              <p id="congratulations" hidden>Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>`,document.querySelector(".modal-content").innerHTML=a,document.querySelector(".modal-window-shop").style.display="block"}W.addEventListener("click",async e=>{e.target.classList.contains("close-window")||e.target.classList.contains("modal-window-shop")?(document.querySelector(".modal-window-shop").style.display="none",p&&document.body.classList.remove("modal-open")):e.target.classList.contains("card-books-category-button")&&le(e.target)});document.addEventListener("keydown",e=>{e.key==="Escape"&&(W.style.display="none",p&&document.body.classList.remove("modal-open"))});async function le(e){try{if(e.textContent==="Add to shopping list"){if(u.has(e.dataset.title))throw new Error("This book has added");u.set(e.dataset.title,H),e.textContent="Remove from the shopping list",document.querySelector("#congratulations").removeAttribute("hidden")}else u.delete(e.dataset.title),e.textContent="Add to shopping list",document.querySelector("#congratulations").setAttribute("hidden","")}catch(o){r.error({title:"Error",message:o.message})}finally{O(),ce()}}function D(){const e=localStorage.getItem("arrayBooksShop");if(e){const o=JSON.parse(e);return new Map(o)}return new Map}function O(){const e=JSON.stringify([...u]);localStorage.setItem("arrayBooksShop",e)}function ce(){u=D()}function de(){window.innerWidth>=1440?p=!0:p=!1}const L=document.querySelector(".scrollToTop");window.onscroll=()=>{window.scrollY>500?L.classList.remove("isHide"):window.scrollY<500&&L.classList.add("isHide"),L.onclick=()=>{window.scrollTo(0,0)}};
//# sourceMappingURL=commonHelpers.js.map
